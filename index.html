<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        div{
            width: 40px;
            height: 40px;
            border: black 1px solid;
        };
        container{
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: center;
        }
    </style>
</head>
<body>
    <button id="connect">Connect</button>
    <input type="text"/><button id="room">Room</button>
    <span id="ids">
        <h1>Connected Ids</h1>

    </span>
    <script>

    </script>
    <input type="text" id="text"/><button id="submit">Submit</button>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.1.2/socket.io.min.js"></script>
    <script>
        // let arr = ['green','blue','yellow','black','green','blue','yellow','black'];
        let arr;
        let r;
        document.querySelector("#connect").addEventListener('click', event => {
            socket = io("http://localhost:3000");

            //Socket Connection setup
            socket.on("connect", () => {
                console.log(socket.id);
                alert("connected");
                // getColor();
            });

             //Message receive
            socket.on('message:receive', (dat) => {
                alert(dat);
                // arr = dat.split(",");
                // setColor();
            });
        })

        document.querySelector("#room").addEventListener('click', event => {
            let room = document.querySelector("input").value;
            r=room;
            socket.emit('join:room', room);
            alert("joined room");
        })

        document.querySelector("#submit").addEventListener('click', event => {
            alert("message")
            // getColor();
            // socket.emit('message:send', arr.toString(),r);
            socket.emit('message:send', document.querySelector("#text").value,r);
        })

        const setColor = () => {
            document.querySelectorAll("div").forEach((item,key) => {
                    item.style.backgroundColor = arr[key];
            })
        }
        const getColor = () => {
            document.querySelectorAll("div").forEach((item,key) => {
                     arr[key] = item.style.backgroundColor;
            })
        }

        
        document.querySelectorAll('div').forEach(item => {
            item.addEventListener('click', event => {
                item.style.backgroundColor = 'red';
            })
        })  

    </script>
</body>
</html>